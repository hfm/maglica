#compdef maglica

_maglica() {
  if (( CURRENT == 2 )); then
    compadd image log vm
  else
    _call_function ret _maglica-$words[2] || _message 'no more arguments'
  fi

  return ret
}

(( $+functions[_maglica-image] )) || _maglica-image() {
  if (( CURRENT == 3 )); then
    compadd copy list
  elif (( CURRENT > 3 )); then
    _call_function ret _maglica-$words[2]-$words[3] || _message 'no more arguments'
  fi

  return ret
}

(( $+functions[_maglica-image-cooy] )) || _maglica-image-copy() {
  local -a hosts images
  hosts=($(_call_program hosts maglica_zsh_completion hosts))
  images=($(_call_program images maglica_zsh_completion images))

  _arguments : \
    '--name=[Image Name]:Image Name:($images)' \
    '--dest=[Destination Host]:Destination Host:($hosts)' \
    ':::'
}

